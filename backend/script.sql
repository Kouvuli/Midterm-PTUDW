DROP TABLE USER_GROUP CASCADE;
DROP TABLE GROUPS CASCADE;
DROP TABLE USERS CASCADE;
DROP TABLE ROLES CASCADE;
DROP TABLE CONFIRMATION_TOKEN CASCADE;
DROP TABLE INVITATION_TOKEN CASCADE;
DROP TABLE ANSWERS CASCADE;
DROP TABLE QUESTIONS CASCADE;
DROP TABLE PRESENTATIONS CASCADE;
DROP TABLE CHAT_QUESTION CASCADE;
DROP TABLE CHAT_ANSWER CASCADE;

CREATE TABLE USERS(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	USERNAME VARCHAR NOT NULL ,
	EMAIL VARCHAR,
	PASSWORD VARCHAR,
	FULLNAME VARCHAR,
	BIRTHDAY VARCHAR,
	CREATE_AT TIMESTAMP,
	IS_STUDENT BOOLEAN,
	ENABLE BOOLEAN,
	LOCK BOOLEAN,
	AUTH_PROVIDER VARCHAR,
	CONSTRAINT PK_USERS PRIMARY KEY(ID)

);

CREATE TABLE GROUPS(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	NAME VARCHAR NOT NULL,
	CREATE_AT TIMESTAMP,
	ADMIN_ID BIGINT,
	LOCK BOOLEAN,
	CONSTRAINT PK_GROUPS PRIMARY KEY(ID)
);

CREATE TABLE USER_GROUP(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	USER_ID BIGINT NOT NULL,
	GROUP_ID BIGINT NOT NULL,
	ROLE_ID INT,
	CONSTRAINT PK_USER_GROUP PRIMARY KEY(ID)
	
	
);
CREATE TABLE ROLES(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	NAME VARCHAR,
	CONSTRAINT PK_ROLES PRIMARY KEY(ID)
);

CREATE TABLE CONFIRMATION_TOKEN(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	TOKEN VARCHAR,
	CREATED_AT TIMESTAMP,
	EXPIRED_AT TIMESTAMP,
	CONFIRMED_AT TIMESTAMP,
	USER_ID BIGINT,
	CONSTRAINT PK_CONFIRMATION_TOKEN PRIMARY KEY(ID)
);

CREATE TABLE INVITATION_TOKEN(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	TOKEN VARCHAR,
	CREATED_AT TIMESTAMP,
	EXPIRED_AT TIMESTAMP,
	IS_USED BOOLEAN,
	GROUP_ID BIGINT,
	CONSTRAINT PK_INVITATION_TOKEN PRIMARY KEY(ID)
);

CREATE TABLE PRESENTATIONS(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	TITLE VARCHAR,
	ACCESS_CODE VARCHAR,
	CREATE_AT TIMESTAMP,
	AUTHOR_ID BIGINT,
	CONSTRAINT PK_PRESENTATIONS PRIMARY KEY(ID)
);


CREATE TABLE QUESTIONS(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	QUESTION VARCHAR,
	CREATE_AT TIMESTAMP,
	PRESENTATION_ID BIGINT,
	ANSWER VARCHAR,
	
	CONSTRAINT PK_QUESTIONS PRIMARY KEY(ID)
);

CREATE TABLE ANSWERS(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	ANSWER VARCHAR ,
	QUESTION_ID BIGINT,
	
	CONSTRAINT PK_ANSWERS PRIMARY KEY(ID)
);


CREATE TABLE CHAT_QUESTION(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	QUESTION VARCHAR,
	CREATE_AT TIMESTAMP,
	VOTE BIGINT,
	ANSWERED BOOLEAN,
	AUTHOR VARCHAR,
	CONSTRAINT PK_CHAT_QUESTION PRIMARY KEY(ID)
);


CREATE TABLE CHAT_ANSWER(
	ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	ANSWER VARCHAR,
	QUESTION_ID BIGINT,
	CREATE_AT TIMESTAMP,
	AUTHOR VARCHAR,
	CONSTRAINT PK_CHAT_ANSWER PRIMARY KEY(ID)
)

INSERT INTO ROLES VALUES (1,'MEMBER');
INSERT INTO ROLES VALUES (2,'KICKOUT');
INSERT INTO ROLES VALUES (3,'CO-OWNER');
INSERT INTO ROLES VALUES (4,'OWNER');
